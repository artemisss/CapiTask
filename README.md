# Capitask

`Capitask` — open-source сервис управления задачами для команды (аналог Jira) с лёгким интерфейсом для работы с backlog и спринтом.

## Open-source статус

- Проект распространяется под лицензией `MIT` (см. `LICENSE`).
- Репозиторий открыт для внешних контрибьюторов.
- Любые изменения должны быть понятны сообществу и сопровождаться описанием влияния и рисков.

## Что уже реализовано

- Backlog в двух режимах: `Board` и `List`.
- Drag-and-drop задач между статусами `To Do / In Progress / Done`.
- Поиск и фильтры по типу и приоритету.
- Создание новых задач осталось в прежнем формате модального окна.
- При открытии существующей задачи сначала показывается режим просмотра: Markdown-описание, комментарии, кнопка перехода в редактирование и создание связанной задачи.
- Для существующих задач блок `Детали задачи` сохраняет изменения по полям `Тип`, `Приоритет`, `Стори поинты` и `Исполнитель` сразу при изменении.
- В режиме редактирования описание меняется как чистый Markdown; предпросмотр включается кнопкой «Посмотреть предпросмотр».
- Блок связей в интерфейсах Backlog/Sprint/Gantt теперь работает через отдельное всплывающее окно: сначала `+`, затем выбор задачи, типа связи (`Связанная`, `Блокирует`, `Подзадача`) и кнопка `Связать`.
- Для уже связанной задачи доступен предпросмотр (название + описание) с действиями `Посмотреть задачу` и `Открепить задачу`.
- Sprint-страница с редактированием статусов и экспортом в CSV.
- Диаграмма Ганта для активных задач с группировкой по исполнителям или по типам, просмотром задачи в модальном окне, кнопкой `Редактировать` и рендером Markdown в режиме просмотра.
- Сохранение состояния в `localStorage`.
- Пасхалка: в режиме списка при прокрутке задач до конца появляется капибара.

## Быстрый запуск

Требования:

- `Node.js 18+`
- `npm 9+`

Команды:

```bash
npm install
npm run dev
```

После запуска приложение доступно на `http://localhost:5173`.

## Скрипты

```bash
npm run dev      # запуск dev-сервера
npm run build    # production-сборка
npm run preview  # локальный просмотр production-сборки
```

## Структура проекта

```text
.
├── docs/
│   └── backend-requirements.md
├── public/
│   └── capibara_chil.png
├── src/
│   ├── App.jsx
│   ├── main.jsx
│   └── styles.css
├── AGENTS.md
├── LICENSE
├── README.md
├── capibara_chil.png
├── index.html
├── package.json
└── vite.config.js
```

## Безопасность

Безопасность является обязательной частью `definition of done`:

- валидируем и санитизируем входные данные;
- не храним секреты в репозитории;
- не логируем токены, пароли и персональные данные;
- минимизируем права доступа;
- для изменений в auth/permissions обязательно делаем отдельный review угроз и граничных кейсов.

Если вы нашли уязвимость, создайте issue с меткой `security` без публикации exploit-подробностей.

## Backend

Требования для серверной части описаны в `docs/backend-requirements.md`.

## Вклад в проект

- Перед PR убедитесь, что проект запускается и собирается локально.
- Описывайте цель изменения, влияние на поведение и потенциальные риски.
- Следуйте правилам из `AGENTS.md`.
