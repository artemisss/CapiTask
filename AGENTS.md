# AGENTS.md

## Назначение

Этот файл задаёт правила для контрибьюторов и AI-агентов в репозитории `Capitask`.

## Open-source

- Проект открыт для сообщества и развивается как open-source.
- Любое изменение должно быть читаемым и понятным внешнему контрибьютору.
- В каждом PR обязательно описывать:
  - цель изменения;
  - влияние на поведение;
  - риски и ограничения.

## Базовые стандарты разработки

- Писать простой, читаемый код без избыточной сложности.
- Избегать магических значений, выносить их в именованные константы.
- Для нетривиальной логики добавлять короткие комментарии на русском языке.
- Не добавлять лишние зависимости без явного обоснования.
- Сохранять обратную совместимость публичных контрактов или явно документировать breaking changes.

## Безопасность (обязательно)

Безопасность обязательна для всех задач, без исключений.

- Валидировать и санитизировать входящие данные на клиенте и сервере.
- Не хранить секреты в репозитории и не коммитить `.env` с реальными значениями.
- Не логировать токены, пароли, персональные и другие чувствительные данные.
- Ограничивать доступ по принципу минимально необходимых прав (`least privilege`).
- Любые изменения в `auth` и `access-control` требуют:
  - отдельного описания модели угроз;
  - проверки граничных кейсов;
  - ревью минимум одним разработчиком.
- В любом сомнительном кейсе выбирать более безопасный вариант реализации.

## Документация

- При изменении пользовательского поведения обновлять `README.md`.
- При изменении требований к backend обновлять `docs/backend-requirements.md`.
- Любой новый публичный API должен быть задокументирован.

## Проверки перед merge

- Приложение запускается локально.
- Сборка проходит без ошибок.
- Нет явных регрессий по основным сценариям пользователя.
- Для важных изменений добавлены/обновлены тесты.
